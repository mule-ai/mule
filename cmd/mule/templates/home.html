async function handleEditIssue(event) {
    event.preventDefault();
    
    const form = document.getElementById('editIssueForm');
    const issueNumber = parseInt(document.getElementById('editIssueNumber').value);
    const newTitle = document.getElementById('editTitle').value;
    const newBody = document.getElementById('editBody').value;
    const path = document.getElementById('repoPath').value;

    try {
        const response = await fetch('/api/local/issues', {
            method: 'PUT',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({
                path,
                issueNumber,
                title: newTitle,
                body: newBody
            })
        });

        if (!response.ok) throw new Error(await response.text());

        closeModal('editIssueModal');
        updateIssueDisplay(issueNumber, newTitle, newBody);
    } catch (err) {
        alert(`Error saving changes: ${err.message}`);
    }
}

function updateIssueDisplay(number, title, body) {
    const issueElements = document.querySelectorAll('.issue-item');
    issueElements.forEach(element => {
        const currentNumber = parseInt(element.getAttribute('data-issue-number'));
        if (currentNumber === number) {
            element.querySelector('.issue-title').textContent = `#${number} ${title}`;
            element.querySelector('.issue-body').textContent = body;
        }
    });
}
