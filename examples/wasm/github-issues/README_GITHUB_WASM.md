#!/bin/bash

# This script demonstrates how to use the GitHub issues fetcher WASM module
# It assumes you have already registered the module with the system

echo "To use the GitHub issues fetcher WASM module:"
echo ""
echo "1. First, register the module with the system:"
echo "   go run register_github_wasm.go"
echo ""
echo "2. Then, you can execute the module with configuration like this:"
echo ""
echo "   curl -X POST http://localhost:8080/api/v1/wasm-modules/{module-id}/execute \\"
echo "     -H \"Content-Type: application/json\" \\"
echo "     -d '{"
echo "           \"repo_url\": \"https://github.com/your-org/your-repo\","
echo "           \"token\": \"your-github-token\""
echo "         }'"
echo ""
echo "Or in a workflow step, you would configure it like:"
echo ""
echo "  {"
echo "    \"type\": \"WASM\","
echo "    \"wasm_module_id\": \"{module-id}\","
echo "    \"config\": {"
echo "      \"repo_url\": \"https://github.com/your-org/your-repo\","
echo "      \"token\": \"your-github-token\""
echo "    }"
echo "  }"
echo ""
echo "The module will output a JSON object with the issues and count:"
echo ""
echo "  {"
echo "    \"issues\": ["
echo "      {"
echo "        \"id\": 123456,"
echo "        \"number\": 1,"
echo "        \"title\": \"Issue title\","
echo "        \"state\": \"open\","
echo "        \"url\": \"https://github.com/owner/repo/issues/1\","
echo "        \"body\": \"Issue description\""
echo "      }"
echo "    ],"
echo "    \"count\": 1"
echo "  }"